<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{block name="title"}座位图模板{/block}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="">
</head>

<body class="container">
    <?php use app\common\view\MenuView; ?>
    <?php $MenuView = new MenuView; ?>
    <?php echo $MenuView->render(); ?>
    <div class="row">
        <hr style="margin-top: 30px;">
        <br>
        <?php $url1 = 'classroomId=' . $classroomId . '&classroomName=' . $classroomName; ?>
        {eq name="$match" value=""}
        {else/}
        <a href="{:url($url . '?' . $url1 . '&seatMapId=' . $SeatMap->id)}" class="btn btn-success" style="float: right;"><i class="glyphicon glyphicon-ok"></i>&nbsp;选择此模板</a>
        {/eq}
    </div>
    <h3 style="margin-left: 545px;margin-bottom: 50px;">
        <?php echo($SeatMap->getData('name')) ?>
        <hr>
        <p style="color: green;">讲台</p>

    </h3>
    <div class="container">
        <table class="table table-bordered table-condensed ">
            <?php $x = 1;$y = 0; ?>
            <?php for($i = 0; $i < $SeatMap->x_map; $i++): ?>
            <tr>
                <?php for($j = 0; $j < $SeatMap->y_map; $j++): ?>
                {eq name='seatAisles[$i * $SeatMap->y_map + $j]->getData("state")' value='1'}
                <td  style="padding-left: 10px;padding-right: 10px;height: 31px;width: 86px;">
                    
                </td>{else /}
                <td class="success" style="padding-left: 10px;padding-right: 10px;">
                    <?php echo('(');echo($x);echo(',');echo(++$y);echo(')');?>
                </td>{/eq}
                <?php endfor; ?>
            </tr>
            <?php if ($y !== 0 ) $x++; ?>
            <?php $y = 0; ?>
            <?php endfor; ?>
        </table>
    </div>
    <hr>
    <?php $i = 0; ?>
    <?php for(; $seatMap1[$i]->id != $SeatMap->id; $i++); ?>
    <div class="row">
        <!-- 既不是第一个也不是最后一个模板 -->
        {if($SeatMap->is_last != 1 && $SeatMap->is_first != 1)}
        <?php $id1 = $seatMap1[$i-1]->id;
            $id2 = $seatMap1[$i+1]->id; ?>
        {/if}
        <!-- 最后一个模板 -->
        {if($SeatMap->is_last === 1 && $SeatMap->is_first != 1)}
        <?php $id1 = $seatMap1[$i-1]->id;
            $id2 = -2; ?>
        {/if}
        <!-- 第一个模板 -->
        {if ($SeatMap->is_first === 1 && $SeatMap->is_last != 1)}
        <?php $id1 = -1;
            $id2 = $seatMap1[$i+1]->id; ?>
        {/if}
        {if ($SeatMap->is_first === 1 && $SeatMap->is_last === 1)}
        <?php $id1 = $SeatMap->id;
            $id2 = $SeatMap->id; ?>
        {/if}
        <a href="{:url('template?id=' . $id1 . '&' . $url1 . '&match=' . $match)}" class="btn btn-primary " style="float: left;">
            <i class="glyphicon glyphicon-chevron-left"></i>
            &nbsp;上一个模板
        </a>
        <a href="{:url('template?id=' . $id2 . '&classroomId=' . $classroomId . '&match=' . $match . '&classroomName=' . $classroomName)}" class="btn btn-primary " style="float: right;">
            &nbsp;下一个模板
            <i class="glyphicon glyphicon-chevron-right "></i>
        </a>
    </div>
    </div>
</body>
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>

</html>